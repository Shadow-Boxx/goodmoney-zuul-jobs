Upload logs to an S3 bucket

This uploads logs to an AWS S3 Bucket.

.. _tree :: http://mama.indstate.edu/users/ice/tree/

**Role Variables**

.. zuul:rolevar:: zuul_log_bucket

   If partitioning is not enabled, this is the name of the bucket
   which will be used.  If partitioning is enabled, then this will be
   used as the prefix for the bucket name which will be separated
   from the partition name by an underscore.  For example, "logs_42"
   would be the bucket name for partition 42.

.. zuul:rolevar:: zuul_log_aws_region

   The AWS region in which the bucket resides.

.. zuul:rolevar:: zuul_site_upload_logs
   :default: true

   Controls when logs are uploaded. true, the default, means always
   upload logs. false means never upload logs. 'failure' means to only
   upload logs when the job has failed.

   .. note:: Intended to be set by admins via site-variables.

.. zuul:rolevar:: zuul_log_aws_credentials
   :default: null

   Complex argument which contains the cloud configuration in
   os-cloud-config (clouds.yaml) format.  It is expected that this
   argument comes from a `Secret`. Note that this is not required.
   If your executor runs on a node that allows it to upload to the S3
   bucket, those credentials will be used instead.

.. zuul:rolevar:: zuul_log_path
   :default: Generated by the role `set-zuul-log-path-fact`

   Prepend this path to the object names when uploading.

.. zuul:rolevar:: zuul_log_bucket_base_url
   :default: Generated from zuul_log_bucket

   Url to prepend to the path of logs uploaded to S3 when setting the
   log path via `zuul_return`. This normally would be the S3 website URL,
   but you may want to run a private S3 and then use this as a link to
   the access proxy.

.. zuul:rolevar:: zuul_log_s3_permission
   :default: public-read

   Set this to one of the permissions mentioned in the Ansible `s3_sync`_
   manual page for the `permission` argument. This will be set for all
   uploaded objects.

.. _`s3_sync`: https://docs.ansible.com/ansible/latest/modules/s3_sync_module.html
